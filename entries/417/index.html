<html>
<head>
    <title>BLOG.IK.AM</title>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link href="https://fonts.googleapis.com/earlyaccess/sawarabimincho.css" rel="stylesheet"/>
    <style>
        body {
            font-size: small;
            font-family: "Sawarabi Mincho";
            margin: 20px;
        }

        a {
            color: darkslategray;
            text-decoration: none;
        }

        article {
            border: darkgrey solid 1px;
            border-radius: 10px;
            padding: 0 10px 10px;
        }

        footer {
            margin: 10px;
        }

        blockquote {
            color: #464646;
            font-style: italic;
            border: darkgrey dotted 1px;
            border-radius: 5px;
            margin: 5px 0;
            padding: 10px;
        }

        pre {
            background-color: dimgray;
            color: white;
            padding: 5px;
            border-radius: 5px;
        }

        h3:before {
            content: "â˜•ï¸ ";
        }

        h4:before {
            content: "ğŸƒ ";
        }

        h5:before {
            content: "âœˆï¸ï¸ ";
        }

        h6:before {
            content: "â˜ï¸ ";
        }

        pre {
            margin-bottom: 10px;
        }
    </style>
</head>
<h1>âœï¸ BLOG.IK.AM</h1>
<p><a href="https://twitter.com/making">@making</a>'s memo</p>
<body>
<article>
    <h2><a href="">ã¯ã˜ã‚ã¦ã®Spring WebFlux (ãã®1 - Spring WebFluxã‚’è©¦ã™)</a></h2>
    <p>
        Updated at <span>2017-06-06T18:11:23Z</span> by <span>Toshiaki Maki</span><br>
        Created at <span>2017-05-08T18:56:28Z</span> by <span>Toshiaki Maki</span>
    </p>
    <div><blockquote>
<p>ã“ã®è¨˜äº‹ã®å†…å®¹ã¯Spring 5.0.0.RC1æ™‚ç‚¹ã§ã®ã‚‚ã®ã§ã™ã€‚5.0.0.RELEASEæ™‚ã§ã®å‹•ä½œä¿è¨¼ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã¾ãŸSNAPSHOTã‚’ä½¿ã£ã¦ã„ã‚‹ãŸã‚ã€ã“ã®ã¾ã¾ã§ã¯å‹•ä½œã—ãªã„ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚</p>
</blockquote>
<p><strong>ç›®æ¬¡</strong></p>
<!-- toc -->
<ul>
<li><a href="#-">ã¯ã˜ã‚ã«</a></li>
<li><a href="#-">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ</a></li>
<li><a href="#-controller-">@Controllerãƒ¢ãƒ‡ãƒ«</a><ul>
<li><a href="#hello-world">Hello World</a></li>
<li><a href="#-stream">ç„¡é™Stream</a></li>
<li><a href="#post-">POSTã®ä¾‹</a></li>
</ul>
</li>
<li><a href="#router-functions-">Router Functionsãƒ¢ãƒ‡ãƒ«</a><ul>
<li><a href="#hello-world">Hello World</a></li>
<li><a href="#-stream">ç„¡é™Stream</a></li>
<li><a href="#post-">POSTã®ä¾‹</a></li>
</ul>
</li>
<li><a href="#-">æ¬¡å›äºˆå‘Š</a></li>
</ul>
<!-- tocstop -->
<h3 id="-">ã¯ã˜ã‚ã«</h3>
<p><a href="http://docs.spring.io/spring/docs/5.0.0.RC1/spring-framework-reference/web.html#web-reactive">Spring WebFlux</a>ã¯Spring 5ã‹ã‚‰è¿½åŠ ã•ã‚ŒãŸã€ãƒãƒ³ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°ãªãƒ©ãƒ³ã‚¿ã‚¤ãƒ ä¸Šã§ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã§ãã‚‹æ–°ã—ã„Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã™ã€‚</p>
<p><img src="https://qiita-image-store.s3.amazonaws.com/0/1852/55642680-438b-2b75-d957-3e8e0ddcff15.png" alt="image"></p>
<p>ä¸Šã®å›³ãŒç¤ºã™é€šã‚Šã€ã“ã‚Œã¾ã§ã®Spring MVCã®æ¨ªã«ä½ç½®ã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã™ã€‚
ã“ã‚Œã¾ã§ã®Spring MVCãŒã‚µãƒ¼ãƒ–ãƒ¬ãƒƒãƒˆã‚³ãƒ³ãƒ†ãƒŠä¸Šã§Servlet APIã‚’ãƒ™ãƒ¼ã‚¹ã«ã—ã¦ããŸãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã‚ã£ãŸã®ã«å¯¾ã—ã€
Spring WebFluxã¯Servlet APIã¯ä½¿ç”¨ã›ãšã€<a href="http://www.reactive-streams.org/">Reactive Streams</a>åŠã³ãã®å®Ÿè£…ã§ã‚ã‚‹<a href="https://projectreactor.io/">Reactor</a>ã‚’ãƒ™ãƒ¼ã‚¹ã¨ã—ãŸæ–°ã—ã„HTTP APIä¸Šã«å®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ã€‚ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã¨ã—ã¦ã¯Nettyã€Undertow(ã‚µãƒ¼ãƒ–ãƒ¬ãƒƒãƒˆã‚³ãƒ³ãƒ†ãƒŠã˜ã‚ƒãªã„æ–¹)ã¨ã„ã£ãŸãƒãƒ³ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ãŒä½¿ãˆã¾ã™ã€‚ã¾ãŸServlet 3.1ã§å°å…¥ã•ã‚ŒãŸNon-Blocking APIã‚’ä½¿ç”¨ã—ãŸTomcat, Jettyå®Ÿè£…ã‚‚ç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚ãŸã ã—ã€Spring WebFluxã‹ã‚‰ã¯Servlet APIã¯è¦‹ãˆã¾ã›ã‚“ã€‚</p>
<p>Spring WebFluxä¸Šã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ãƒ¢ãƒ‡ãƒ«ã¨ã—ã¦ã¯</p>
<ul>
<li>@Controlller</li>
<li>Router Functions</li>
</ul>
<p>ã®2ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚å‰è€…ã¯ã“ã‚Œã¾ã§Spring MVCã§ä½¿ç”¨ã—ã¦ããŸã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ™ãƒ¼ã‚¹ã®Contollerå®Ÿè£…æ–¹æ³•ãã®ã‚‚ã®ã§ã™ã€‚
ã¤ã¾ã‚Šãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã¯å¤‰ã‚ã‚‹ã‘ã©Controllerã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°æ–¹æ³•ã¯åŒã˜ã§ã™ã€‚
å¾Œè€…ã®æ–¹ã¯ãƒ©ãƒ ãƒ€ãƒ™ãƒ¼ã‚¹ã®å…¨ãæ–°ã—ã„Controllerã®å®Ÿè£…æ–¹æ³•ã«ãªã‚Šã¾ã™ã€‚Node.jsã®Expressã¿ãŸã„ãªã‚‚ã®ã‚’ã‚¤ãƒ¡ãƒ¼ã‚¸ã—ã¦ã„ãŸã ã‘ã‚Œã°ã¨æ€ã„ã¾ã™ã€‚</p>
<p>æœ¬è¨˜äº‹ã§ã¯ä¸¡æ–¹ã®ç°¡å˜ãªä½¿ã„æ–¹ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚</p>
<p>ã¡ãªã¿ã«è©³ã—ãã¯Java Day Tokyo 2017ã®D1-D5ã§è©±ã™ã®ã§èãã«æ¥ã¦ãã ã•ã„ã€‚
<a href="http://www.oracle.co.jp/events/javaday/2017">http://www.oracle.co.jp/events/javaday/2017</a></p>
<h3 id="-">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ</h3>
<p>ã¾ãšã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚Spring Boot 2.0ã‹ã‚‰Spring 5ã«å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚</p>
<p>curlã‚³ãƒãƒ³ãƒ‰ã§é››å½¢ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚Windowsã®å ´åˆã¯Bashã‹ã‚‰å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚</p>
<pre><code>curl https://start.spring.io/starter.tgz \
       -d bootVersion=2.0.0.BUILD-SNAPSHOT \
       -d artifactId=hello-webflux \
       -d baseDir=hello-webflux \
       -d dependencies=webflux \
       -d applicationName=HelloWebFluxApplication | tar -xzvf -
</code></pre><p>ã§ããŸ<code>hello-webflux</code>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’IDEã§é–‹ã„ã¦ãã ã•ã„ã€‚</p>
<blockquote>
<p>ä»¥ä¸‹ã®èª¬æ˜ã§ã€Streamã¨æ›¸ã„ã¦ã„ã‚‹å ´åˆã¯é€£ç¶šã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã®ã“ã¨ã‚’æŒ‡ã—ã€<code>Stream</code>ã¨æ›¸ã„ã¦ã„ã‚‹å ´åˆã¯Java8ã®<code>java.util.stream.Stream</code>ã‚’æŒ‡ã—ã¾ã™ã€‚</p>
</blockquote>
<h3 id="-controller-">@Controllerãƒ¢ãƒ‡ãƒ«</h3>
<p>ã¾ãšã¯@Controllerãƒ¢ãƒ‡ãƒ«ã®Hello Worldã‚’è©¦ã—ã¾ã™ã€‚</p>
<h4 id="hello-world">Hello World</h4>
<p><code>src/main/java/com/example/HelloController.java</code>ã‚’ä½œæˆã—ã¦ä¸‹ã•ã„ã€‚</p>
<pre><code class="lang-java">package com.example;

import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

import reactor.core.publisher.Flux;

@RestController
public class HelloController {

    @GetMapping(&quot;/&quot;)
    Flux&lt;String&gt; hello() {
        return Flux.just(&quot;Hello&quot;, &quot;World&quot;);
    }
}
</code></pre>
<p><code>Flux</code>ã«è¦‹æ…£ã‚Œãªã„æ–¹ã¯ã„ã‚‹ã¨æ€ã„ã¾ã™ãŒã€ã±ã£ã¨è¦‹ã€ä»Šã¾ã§æ›¸ã„ã¦ããŸSpring MVCã®Controllerã¨å…¨ãåŒã˜ã§ã™ã€‚</p>
<p><code>com.example.HelloWebFluxApplication</code>ã‚¯ãƒ©ã‚¹ã®<code>main</code>ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨Spring WebFluxã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒç«‹ã¡ä¸ŠãŒã‚Šã¾ã™ã€‚</p>
<pre><code>  .   ____          _            __ _ _
 /\\ / ___&#39;_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | &#39;_ | &#39;_| | &#39;_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  &#39;  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::  (v2.0.0.BUILD-SNAPSHOT)

2017-05-09 03:25:20.123  INFO 92125 --- [           main] com.example.HelloWebFluxApplication      : Starting HelloWebFluxApplication on jpxxmakitm1.corp.emc.com with PID 92125 (/private/tmp/hello-webflux/target/classes started by makit in /private/tmp/hello-webflux)
2017-05-09 03:25:20.128  INFO 92125 --- [           main] com.example.HelloWebFluxApplication      : No active profile set, falling back to default profiles: default
2017-05-09 03:25:20.199  INFO 92125 --- [           main] .r.c.ReactiveWebServerApplicationContext : Refreshing org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext@769e7ee8: startup date [Tue May 09 03:25:20 JST 2017]; root of context hierarchy
2017-05-09 03:25:20.877  WARN 92125 --- [           main] o.h.v.m.ParameterMessageInterpolator     : HV000184: ParameterMessageInterpolator has been chosen, EL interpolation will not be supported
2017-05-09 03:25:21.045  WARN 92125 --- [           main] o.h.v.m.ParameterMessageInterpolator     : HV000184: ParameterMessageInterpolator has been chosen, EL interpolation will not be supported
2017-05-09 03:25:21.269  INFO 92125 --- [           main] s.w.r.r.m.a.RequestMappingHandlerMapping : Mapped &quot;{[/],methods=[GET]}&quot; onto reactor.core.publisher.Flux&lt;java.lang.String&gt; com.example.HelloController.hello()
2017-05-09 03:25:21.296  INFO 92125 --- [           main] o.s.w.r.handler.SimpleUrlHandlerMapping  : Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.reactive.resource.ResourceWebHandler]
2017-05-09 03:25:21.297  INFO 92125 --- [           main] o.s.w.r.handler.SimpleUrlHandlerMapping  : Mapped URL path [/**] onto handler of type [class org.springframework.web.reactive.resource.ResourceWebHandler]
2017-05-09 03:25:21.381  INFO 92125 --- [           main] o.s.w.r.r.m.a.ControllerMethodResolver   : Looking for @ControllerAdvice: org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext@769e7ee8: startup date [Tue May 09 03:25:20 JST 2017]; root of context hierarchy
2017-05-09 03:25:21.947  INFO 92125 --- [           main] o.s.j.e.a.AnnotationMBeanExporter        : Registering beans for JMX exposure on startup
2017-05-09 03:25:22.042  INFO 92125 --- [           main] o.s.b.web.embedded.netty.NettyWebServer  : Netty started on port(s): 8080
2017-05-09 03:25:22.048  INFO 92125 --- [           main] com.example.HelloWebFluxApplication      : Started HelloWebFluxApplication in 3.044 seconds (JVM running for 3.679)
</code></pre><p>ã„ã¤ã‚‚ã®Spring Bootãªã‚‰TomcatãŒç«‹ã¡ä¸ŠãŒã£ã¦ã„ã¾ã—ãŸãŒã€ä»Šå›ã¯NettyãŒèµ·å‹•ã—ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚</p>
<p><code>curl</code>ã§<code>localhost:8080</code>ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ãã ã•ã„ã€‚</p>
<pre><code>$ curl -v localhost:8080
&gt; GET / HTTP/1.1
&gt; Host: localhost:8080
&gt; User-Agent: curl/7.43.0
&gt; Accept: */*
&gt; 
&lt; HTTP/1.1 200 OK
&lt; transfer-encoding: chunked
&lt; Content-Type: text/plain;charset=UTF-8
&lt; 
HelloWorld
</code></pre><p>HellWorldãŒè¡¨ç¤ºã•ã‚Œã¾ã—ãŸã€‚</p>
<p><code>Flux</code>ã¯Reactive Streamsã®<code>Publisher</code>ã‚’å®Ÿè£…ã—ãŸNè¦ç´ ã®ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’è¡¨ç¾ã™ã‚‹Reactorã®ã‚¯ãƒ©ã‚¹ã§ã™ã€‚
ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯<code>text/plain</code>ã§ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒå¸°ã‚Šã¾ã—ãŸãŒã€</p>
<ul>
<li>Server-Sent Event</li>
<li>JSON Stream</li>
</ul>
<p>ã§è¿”ã™ã“ã¨ã‚‚ã§ãã¾ã™ã€‚</p>
<p>Server-Sent Eventã§è¿”ã™å ´åˆã¯<code>Accept</code>ãƒ˜ãƒƒãƒ€ã«<code>text/event-stream</code>ã‚’æŒ‡å®šã—ã¦ãã ã•ã„ã€‚</p>
<pre><code>$ curl -v localhost:8080 -H &#39;Accept: text/event-stream&#39;
&gt; GET / HTTP/1.1
&gt; Host: localhost:8080
&gt; User-Agent: curl/7.43.0
&gt; Accept: text/event-stream
&gt; 
&lt; HTTP/1.1 200 OK
&lt; transfer-encoding: chunked
&lt; Content-Type: text/event-stream
&lt; 
data:Hello

data:World
</code></pre><p>JSON Streamã§è¿”ã™ã¨ãã¯<code>Accept</code>ãƒ˜ãƒƒãƒ€ã«<code>application/stream+json</code>ã‚’æŒ‡å®šã—ã¾ã™ãŒã€ä»Šå›ã®ã‚±ãƒ¼ã‚¹ï¼ˆæ–‡å­—åˆ—ã‚¹ãƒˆãƒªãƒ¼ãƒ ï¼‰ã§ã¯è¦‹ãŸç›®ãŒ<code>text/plain</code>ã®æ™‚ã¨å¤‰ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
<pre><code>$ curl -v localhost:8080 -H &#39;Accept: application/stream+json&#39;
&gt; GET / HTTP/1.1
&gt; Host: localhost:8080
&gt; User-Agent: curl/7.43.0
&gt; Accept: application/stream+json
&gt; 
&lt; HTTP/1.1 200 OK
&lt; transfer-encoding: chunked
&lt; Content-Type: application/stream+json;charset=UTF-8
&lt; 
HelloWorld
</code></pre><h4 id="-stream">ç„¡é™Stream</h4>
<p>æ¬¡ã¯ã‚‚ã†å°‘ã—Streamæ„Ÿã®ã‚ã‚‹ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã—ã¾ã—ã‚‡ã†ã€‚</p>
<p><code>Flux</code>ã¯<code>Stream</code>ã‹ã‚‰ç”Ÿæˆã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚</p>
<p>æ¬¡ã®<code>stream</code>ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½œæˆã—ã¦ã€ç„¡é™<code>Stream</code>ã‚’ä½œæˆã—ã€ãã®ã†ã¡ã®10ä»¶ã‚’<code>Flux</code>ã«å¤‰æ›ã—ã¦è¿”å´ã—ã¦ãã ã•ã„ã€‚</p>
<pre><code class="lang-java">package com.example;

import java.util.Collections;
import java.util.Map;
import java.util.stream.Stream;

import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

import reactor.core.publisher.Flux;

@RestController
public class HelloController {

    @GetMapping(&quot;/&quot;)
    Flux&lt;String&gt; hello() {
        return Flux.just(&quot;Hello&quot;, &quot;World&quot;);
    }

    @GetMapping(&quot;/stream&quot;)
    Flux&lt;Map&lt;String, Integer&gt;&gt; stream() {
        Stream&lt;Integer&gt; stream = Stream.iterate(0, i -&gt; i + 1); // Java8ã®ç„¡é™Stream
        return Flux.fromStream(stream.limit(10))
                .map(i -&gt; Collections.singletonMap(&quot;value&quot;, i));
    }
}
</code></pre>
<p><code>com.example.HelloWebFluxApplication</code>ã‚¯ãƒ©ã‚¹ã‚’å†èµ·å‹•ã—ã¦ãã ã•ã„ã€‚</p>
<p><code>/stream</code>ã«å¯¾ã™ã‚‹ä¸‰ç¨®é¡ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¯ãã‚Œãã‚Œã€</p>
<p>é€šå¸¸ã®JSON</p>
<pre><code>$ curl -v localhost:8080/stream
&gt; GET /stream HTTP/1.1
&gt; Host: localhost:8080
&gt; User-Agent: curl/7.43.0
&gt; Accept: */*
&gt; 
&lt; HTTP/1.1 200 OK
&lt; transfer-encoding: chunked
&lt; Content-Type: application/json;charset=UTF-8
&lt; 
[{&quot;value&quot;:0},{&quot;value&quot;:1},{&quot;value&quot;:2},{&quot;value&quot;:3},{&quot;value&quot;:4},{&quot;value&quot;:5},{&quot;value&quot;:6},{&quot;value&quot;:7},{&quot;value&quot;:8},{&quot;value&quot;:9}]
</code></pre><p>Server-Sent Event</p>
<pre><code>$ curl -v localhost:8080/stream -H &#39;Accept: text/event-stream&#39;
&gt; GET /stream HTTP/1.1
&gt; Host: localhost:8080
&gt; User-Agent: curl/7.43.0
&gt; Accept: text/event-stream
&gt; 
&lt; HTTP/1.1 200 OK
&lt; transfer-encoding: chunked
&lt; Content-Type: text/event-stream
&lt; 
data:{&quot;value&quot;:0}

data:{&quot;value&quot;:1}

data:{&quot;value&quot;:2}

data:{&quot;value&quot;:3}

data:{&quot;value&quot;:4}

data:{&quot;value&quot;:5}

data:{&quot;value&quot;:6}

data:{&quot;value&quot;:7}

data:{&quot;value&quot;:8}
</code></pre><p>JSON Stream</p>
<pre><code>$ curl -v localhost:8080/stream -H &#39;Accept: application/stream+json&#39;
&gt; GET /stream HTTP/1.1
&gt; Host: localhost:8080
&gt; User-Agent: curl/7.43.0
&gt; Accept: application/stream+json
&gt; 
&lt; HTTP/1.1 200 OK
&lt; transfer-encoding: chunked
&lt; Content-Type: application/stream+json;charset=UTF-8
&lt; 
{&quot;value&quot;:0}
{&quot;value&quot;:1}
{&quot;value&quot;:2}
{&quot;value&quot;:3}
{&quot;value&quot;:4}
{&quot;value&quot;:5}
{&quot;value&quot;:6}
{&quot;value&quot;:7}
{&quot;value&quot;:8}
{&quot;value&quot;:9}
</code></pre><p>ã¨ãªã‚Šã¾ã™ã€‚ã“ã‚Œã§æ™®é€šã®JSON(<code>application/json</code>)ã¨JSON Stream(<code>application/stream+json</code>)ã®é•ã„ãŒã‚ã‹ã£ãŸã¨æ€ã„ã¾ã™ã€‚</p>
<p>å®Ÿã¯<code>limit</code>ã‚’ã¤ã‘ã‚‹å¿…è¦ã¯ãªãã€ãã®ã¾ã¾ç„¡é™Streamã‚’è¿”ã™ã“ã¨ã‚‚ã§ãã¾ã™ã€‚
ã“ã‚Œã¯æ™®é€šã®Controllerã®ç™ºæƒ³ã ã¨æ°¸é ã«ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒè¿”ã£ã¦ã“ãªã„ã“ã¨ã«ãªã‚Šã¾ã™ã€‚å®Ÿã¯<code>application/json</code>ã®å ´åˆã¯ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒè¿”ã‚Šã¾ã›ã‚“(IntegerãŒã‚ªãƒ¼ãƒãƒ¼ãƒ•ãƒ­ãƒ¼ã—ãŸã‚‰è¿”ã‚‹ã‹ã‚‚ï¼Ÿ)ã€‚
ãªã®ã§ã¾ãšã¯ã‚ãˆã¦<code>limit</code>ã‚’ã¤ã‘ã¾ã—ãŸã€‚Server-Sent Eventã¨JSON Streamã¯ç„¡é™Streamã‚’è¿”ã™ã“ã¨ã‚‚ã§ãã¾ã™ã€‚
è©¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
<pre><code class="lang-java">package com.example;

import java.util.Collections;
import java.util.Map;
import java.util.stream.Stream;

import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

import reactor.core.publisher.Flux;

@RestController
public class HelloController {

    @GetMapping(&quot;/&quot;)
    Flux&lt;String&gt; hello() {
        return Flux.just(&quot;Hello&quot;, &quot;World&quot;);
    }

    @GetMapping(&quot;/stream&quot;)
    Flux&lt;Map&lt;String, Integer&gt;&gt; stream() {
        Stream&lt;Integer&gt; stream = Stream.iterate(0, i -&gt; i + 1);
        return Flux.fromStream(stream) // limitã‚’å¤–ã™
                                .map(i -&gt; Collections.singletonMap(&quot;value&quot;, i));
    }
}
</code></pre>
<p>Server-Sent Eventã‚‚JSON Streamã‚‚æ¬¡ã®ã‚ˆã†ã«è¿”ã‚Šã¾ã™ãŒã€Ctrl+Cã§æ­¢ã‚ã‚‹ã¾ã§ã™ã”ã„ã‚¹ãƒ”ãƒ¼ãƒ‰ã§ã‚¹ãƒˆãƒªãƒ¼ãƒ ãŒæµã‚Œã¾ã™ã€‚</p>
<p>Server-Sent Event</p>
<pre><code>$ curl -v localhost:8080/stream -H &#39;Accept: text/event-stream&#39;
&gt; GET /stream HTTP/1.1
&gt; Host: localhost:8080
&gt; User-Agent: curl/7.43.0
&gt; Accept: text/event-stream
&gt; 
&lt; HTTP/1.1 200 OK
&lt; transfer-encoding: chunked
&lt; Content-Type: text/event-stream
&lt; 
data:{&quot;value&quot;:0}

data:{&quot;value&quot;:1}

data:{&quot;value&quot;:2}

data:{&quot;value&quot;:3}

data:{&quot;value&quot;:4}

data:{&quot;value&quot;:5}

data:{&quot;value&quot;:6}

data:{&quot;value&quot;:7}

data:{&quot;value&quot;:8}

data:{&quot;value&quot;:9}

data:{&quot;value&quot;:10}

data:{&quot;value&quot;:11}

data:{&quot;value&quot;:12}

data:{&quot;value&quot;:13}

data:{&quot;value&quot;:14}

...
</code></pre><p>JSON Stream</p>
<pre><code>$ curl -v localhost:8080/stream -H &#39;Accept: application/stream+json&#39;
&gt; GET /stream HTTP/1.1
&gt; Host: localhost:8080
&gt; User-Agent: curl/7.43.0
&gt; Accept: application/stream+json
&gt; 
&lt; HTTP/1.1 200 OK
&lt; transfer-encoding: chunked
&lt; Content-Type: application/stream+json;charset=UTF-8
&lt; 
{&quot;value&quot;:0}
{&quot;value&quot;:1}
{&quot;value&quot;:2}
{&quot;value&quot;:3}
{&quot;value&quot;:4}
{&quot;value&quot;:5}
{&quot;value&quot;:6}
{&quot;value&quot;:7}
{&quot;value&quot;:8}
{&quot;value&quot;:9}
{&quot;value&quot;:10}
{&quot;value&quot;:11}
{&quot;value&quot;:12}
{&quot;value&quot;:13}
{&quot;value&quot;:14}
...
</code></pre><p>Streamã‚’ã‚†ã£ãã‚Šè¿”ã—ãŸã„å ´åˆã¯<code>Flux.interval(Duration)</code>ã¨zipã—ãŸStreamã‚’è¿”ã—ã¾ã™ã€‚</p>
<pre><code class="lang-java">package com.example;

import java.time.Duration;
import java.util.Collections;
import java.util.Map;
import java.util.stream.Stream;

import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

import reactor.core.publisher.Flux;

@RestController
public class HelloController {

    @GetMapping(&quot;/&quot;)
    Flux&lt;String&gt; hello() {
        return Flux.just(&quot;Hello&quot;, &quot;World&quot;);
    }

    @GetMapping(&quot;/stream&quot;)
    Flux&lt;Map&lt;String, Integer&gt;&gt; stream() {
        Stream&lt;Integer&gt; stream = Stream.iterate(0, i -&gt; i + 1);
        return Flux.fromStream(stream).zipWith(Flux.interval(Duration.ofSeconds(1)))
                .map(tuple -&gt; Collections.singletonMap(&quot;value&quot;, tuple.getT1() /* ã‚¿ãƒ—ãƒ«ã®1ã¤ç›®è¦ç´  = Stream&lt;Integer&gt;ã®è¦ç´  */));
    }
}
</code></pre>
<p>ã“ã‚Œã§æ¯ç§’1ä»¶ãšã¤ã‚†ã£ãã‚Šãƒ‡ãƒ¼ã‚¿ãŒè¿”ã£ã¦ãã¾ã™ã€‚</p>
<pre><code>$ curl -v localhost:8080/stream -H &#39;Accept: application/stream+json&#39;
&gt; GET /stream HTTP/1.1
&gt; Host: localhost:8080
&gt; User-Agent: curl/7.43.0
&gt; Accept: application/stream+json
&gt; 
&lt; HTTP/1.1 200 OK
&lt; transfer-encoding: chunked
&lt; Content-Type: application/stream+json;charset=UTF-8
&lt; 
{&quot;value&quot;:0}
{&quot;value&quot;:1}
{&quot;value&quot;:2}
{&quot;value&quot;:3}
{&quot;value&quot;:4}
{&quot;value&quot;:5}
</code></pre><h4 id="post-">POSTã®ä¾‹</h4>
<p>æ¬¡ã«POSTã®ä¾‹ã‚‚è©¦ã—ã¾ã™ã€‚</p>
<p>ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ã®æ–‡å­—åˆ—ã‚’å¤§æ–‡å­—ã«ã—ã¦è¿”ã™<code>echo</code>ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½œã‚Šã¾ã™ã€‚</p>
<pre><code class="lang-java">package com.example;

import java.time.Duration;
import java.util.Collections;
import java.util.Map;
import java.util.stream.Stream;

import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RestController;

import reactor.core.publisher.Flux;
import reactor.core.publisher.Mono;

@RestController
public class HelloController {

    @GetMapping(&quot;/&quot;)
    Flux&lt;String&gt; hello() {
        return Flux.just(&quot;Hello&quot;, &quot;World&quot;);
    }

    @GetMapping(&quot;/stream&quot;)
    Flux&lt;Map&lt;String, Integer&gt;&gt; stream() {
        Stream&lt;Integer&gt; stream = Stream.iterate(0, i -&gt; i + 1);
        return Flux.fromStream(stream).zipWith(Flux.interval(Duration.ofSeconds(1)))
                .map(tuple -&gt; Collections.singletonMap(&quot;value&quot;, tuple.getT1()));
    }

    @PostMapping(&quot;/echo&quot;)
    Mono&lt;String&gt; echo(@RequestBody Mono&lt;String&gt; body) {
        return body.map(String::toUpperCase);
    }
}
</code></pre>
<p>æ™®é€šã®Controllerã¨åŒã˜ãã€<code>@RequestBody</code>ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ã‚’å—ã‘å–ã‚Œã¾ã™ã€‚Spring WebFluxã§ã¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£(ã“ã“ã§ã¯æ–‡å­—åˆ—)ã‚’<code>Mono</code>ã«ãƒ©ãƒƒãƒ—ã—ã¦å—ã‘å–ã‚‹ã“ã¨ã§ã€éåŒæœŸã§å‡¦ç†ã‚’chain / composeã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
(ã¡ãªã¿ã«<code>Mono</code>ã§ãƒ©ãƒƒãƒ—ã›ãš<code>String</code>ã§å—ã‘ãŸå ´åˆã¯ãƒãƒ³ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°ã§åŒæœŸãªå‡¦ç†ã«ãªã‚Šã¾ã™ã€‚)
ã“ã®ä¾‹ã§ã¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ã‚’å¤§æ–‡å­—ã«å¤‰æ›ã™ã‚‹<code>map</code>ã®çµæœã®<code>Mono</code>ã‚’ãã®ã¾ã¾è¿”ã—ã¦ã„ã¾ã™ã€‚<code>Mono</code>ã¯1ã¾ãŸã¯0è¦ç´ ã®<code>Publisher</code>ã§ã™ã€‚</p>
<pre><code>$ curl localhost:8080/echo -d hoge
HOGE
</code></pre><p><code>Mono</code>ã®éƒ¨åˆ†ã‚’<code>Flux</code>ã«å¤‰ãˆã¦ã‚‚OKã§ã™ã€‚ä¸€ä»¶ã—ã‹æ‰±ã‚ãªã„ã“ã¨ã‚’å‰æã®å‡¦ç†ã§ã‚ã‚Œã°<code>Mono</code>ã‚’ä½¿ã£ãŸæ–¹ãŒæ˜ç¤ºçš„ã§ã™ã€‚
é€†ã«è¤‡æ•°ä»¶æ•°ã®Streamã‚’æ‰±ã„ãŸã„å ´åˆã¯<code>Flux</code>ã«ã—ã¾ã™ã€‚</p>
<p>æ¬¡ã®ä¾‹ã§ã¯<code>@PostMapping</code>ã‚’ã¤ã‘ãŸ<code>stream</code>ãƒ¡ã‚½ãƒƒãƒ‰ã«ã§Streamã‚’<code>Flux</code>ã§å—ã‘å–ã‚Šã€ã‚­ãƒ¼<code>value</code>ã«å¯¾ã™ã‚‹å€¤ã®æ•°å€¤ã‚’2å€ã«ã—ãŸå€¤ã‚’ã‚­ãƒ¼<code>foo</code>ã«å…¥ã‚ŒãŸ<code>Map</code>ã«å¤‰æ›ã—ã¦è¿”å´ã—ã¦ã„ã¾ã™ã€‚</p>
<pre><code class="lang-java">package com.example;

import java.time.Duration;
import java.util.Collections;
import java.util.Map;
import java.util.stream.Stream;

import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RestController;

import reactor.core.publisher.Flux;
import reactor.core.publisher.Mono;

@RestController
public class HelloController {

    @GetMapping(&quot;/&quot;)
    Flux&lt;String&gt; hello() {
        return Flux.just(&quot;Hello&quot;, &quot;World&quot;);
    }

    @GetMapping(&quot;/stream&quot;)
    Flux&lt;Map&lt;String, Integer&gt;&gt; stream() {
        Stream&lt;Integer&gt; stream = Stream.iterate(0, i -&gt; i + 1);
        return Flux.fromStream(stream).zipWith(Flux.interval(Duration.ofSeconds(1)))
                .map(tuple -&gt; Collections.singletonMap(&quot;value&quot;,
                        tuple.getT1()));
    }

    @PostMapping(&quot;/echo&quot;)
    Mono&lt;String&gt; echo(@RequestBody Mono&lt;String&gt; body) {
        return body.map(String::toUpperCase);
    }

    @PostMapping(&quot;/stream&quot;)
    Flux&lt;Map&lt;String, Integer&gt;&gt; stream(@RequestBody Flux&lt;Map&lt;String, Integer&gt;&gt; body) {
        return body.map(m -&gt; Collections.singletonMap(&quot;double&quot;, m.get(&quot;value&quot;) * 2));
    }
}
</code></pre>
<p>JSON Streamã§POSTã—ã¦Server-Sent Eventã§å—ä¿¡ã™ã‚‹ã‚ˆã†ã«<code>Content-Type</code>ãƒ˜ãƒƒãƒ€ã¨<code>Accept</code>ãƒ˜ãƒƒãƒ€ã‚’æŒ‡å®šã—ã¾ã™ã€‚</p>
<pre><code>$ curl -v localhost:8080/stream -d &#39;{&quot;value&quot;:1}{&quot;value&quot;:2}{&quot;value&quot;:3}&#39; -H &#39;Content-Type: application/stream+json&#39;  -H &#39;Accept: text/event-stream&#39;
&gt; POST /stream HTTP/1.1
&gt; Host: localhost:8080
&gt; User-Agent: curl/7.43.0
&gt; Content-Type: application/stream+json
&gt; Accept: text/event-stream
&gt; Content-Length: 33
&gt; 
&lt; HTTP/1.1 200 OK
&lt; transfer-encoding: chunked
&lt; Content-Type: text/event-stream
&lt; 
data:{&quot;double&quot;:2}

data:{&quot;double&quot;:4}

data:{&quot;double&quot;:6}
</code></pre><h3 id="router-functions-">Router Functionsãƒ¢ãƒ‡ãƒ«</h3>
<p>æ¬¡ã«ã‚‚ã†ä¸€ã¤ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ãƒ¢ãƒ‡ãƒ«ã§ã‚ã‚‹Router Functionsã‚’è©¦ã—ã¾ã™ã€‚</p>
<p>Route Functionsã§ã¯POJOã«<code>@RestController</code>ã‚„<code>@GetMapping</code>ãªã©ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã¤ã‘ã¦ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’å®šç¾©ã™ã‚‹ä»£ã‚ã‚Šã«ã€
ãƒ‘ã‚¹ã¨ãƒãƒ³ãƒ‰ãƒ©ãƒ¼é–¢æ•°(ãƒ©ãƒ ãƒ€)ã®çµ„ã¿åˆã‚ã›ã§ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’å®šç¾©ã—ã¾ã™ã€‚</p>
<p>Spring Boot 2.0ã§ã¯ç¾çŠ¶ã€Router Functionsã¨@Controllerãƒ¢ãƒ‡ãƒ«ã¯å…±å­˜ã§ããªã„ã®ã§(ä¸¡æ–¹ä½¿ã†ã¨@ControllerãŒç„¡è¦–ã•ã‚Œã‚‹ï¼Ÿ)ã€å…ˆã»ã©ä½œæˆã—ãŸ<code>HelloController</code>ã‚’å‰Šé™¤ã—ã¦ãã ã•ã„ã€‚</p>
<h4 id="hello-world">Hello World</h4>
<p>@Controllerã®æ™‚ã¨åŒã˜ã‚ˆã†ã«GET /ã§<code>Flux</code>ã®Hello Worldã‚’è¿”ã™Routingã®å®šç¾©ã‚’æ›¸ãã¾ã—ã‚‡ã†ã€‚Spring Boot 2.0ã§ã¯<code>RouterFunction&lt;ServerResponse&gt;</code>ãªBeanå®šç¾©ãŒã‚ã‚Œã°ã€ãã‚Œã‚’Router Functionsã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°å®šç¾©ã¨ã¿ãªã—ã¾ã™ã€‚</p>
<p>ã¾ãšã¯ç°¡å˜ã«ã€Beanå®šç¾©ä¸­ã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°å®šç¾©ã‚’ç›´æ¥æ›¸ãã¾ã™ã€‚</p>
<pre><code class="lang-java">package com.example;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.annotation.Bean;
import org.springframework.web.reactive.function.server.RequestPredicates;
import org.springframework.web.reactive.function.server.RouterFunction;
import org.springframework.web.reactive.function.server.RouterFunctions;
import org.springframework.web.reactive.function.server.ServerResponse;

import reactor.core.publisher.Flux;

@SpringBootApplication
public class HelloWebFluxApplication {

    public static void main(String[] args) {
        SpringApplication.run(HelloWebFluxApplication.class, args);
    }

    @Bean
    RouterFunction&lt;ServerResponse&gt; routes() {
        return RouterFunctions.route(RequestPredicates.GET(&quot;/&quot;), req -&gt; ServerResponse
                .ok().body(Flux.just(&quot;Hello&quot;, &quot;World!&quot;), String.class));
    }
}
</code></pre>
<p>å€‹äººçš„ã«ã¯<code>RouterFunctions.*</code>ã¨<code>RequestPredicates.*</code>ã¨<code>ServerResponse.*</code>ã‚’static importã™ã‚‹ã®ãŒå¥½ã¿ã§ã™ã€‚IntelliJ IDEAãªã‚‰Option+Enterã§&quot;Add static import for ...&quot;ã‚’é¸æŠã€‚</p>
<p>static importã™ã‚‹ã¨æ¬¡ã®ã‚ˆã†ã«æ›¸ã‘ã¾ã™ã€‚</p>
<pre><code class="lang-java">package com.example;

import static org.springframework.web.reactive.function.server.RequestPredicates.GET;
import static org.springframework.web.reactive.function.server.RouterFunctions.route;
import static org.springframework.web.reactive.function.server.ServerResponse.ok;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.annotation.Bean;
import org.springframework.web.reactive.function.server.RouterFunction;
import org.springframework.web.reactive.function.server.ServerResponse;

import reactor.core.publisher.Flux;

@SpringBootApplication
public class HelloWebFluxApplication {

    public static void main(String[] args) {
        SpringApplication.run(HelloWebFluxApplication.class, args);
    }

    @Bean
    RouterFunction&lt;ServerResponse&gt; routes() {
        return route(GET(&quot;/&quot;),
                req -&gt; ok().body(Flux.just(&quot;Hello&quot;, &quot;World!&quot;), String.class));
    }
}
</code></pre>
<p><code>HelloWebFluxApplication</code>ã‚’å†èµ·å‹•ã—ã¦ã€<code>curl</code>ã§<code>localhost:8080</code>ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ãã ã•ã„ã€‚</p>
<pre><code>$ curl -v localhost:8080
&gt; GET / HTTP/1.1
&gt; Host: localhost:8080
&gt; User-Agent: curl/7.43.0
&gt; Accept: */*
&gt; 
&lt; HTTP/1.1 200 OK
&lt; transfer-encoding: chunked
&lt; Content-Type: text/plain;charset=UTF-8
&lt; 
Hello World
</code></pre><p>Router Functionsã®å ´åˆã€ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®èª­ã¿è¾¼ã¿(= Reflectionå‡¦ç†)ãŒãªã„ãŸã‚ã€åŸç†çš„ã«ã¯@Controllerã‚ˆã‚Šã‚‚è‹¥å¹²é€Ÿã„ã¯ãšã§ã™ã€‚</p>
<blockquote>
<p>ãªãŠã€<code>Publisher</code>ã§ã¯ãªãã€ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰æ–‡å­—åˆ—ãªã©åŒæœŸãªãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒœãƒ‡ã‚£ã‚’è¿”ã›ã°è‰¯ã„å ´åˆã¯ã€æ¬¡ã®ã‚ˆã†ã«<code>syncBody</code>ã¨è¨€ã†ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆãƒ¡ã‚½ãƒƒãƒ‰ã‚‚ç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>
<pre><code class="lang-java">package com.example;

import static org.springframework.web.reactive.function.server.RequestPredicates.GET;
import static org.springframework.web.reactive.function.server.RouterFunctions.route;
import static org.springframework.web.reactive.function.server.ServerResponse.ok;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.annotation.Bean;
import org.springframework.web.reactive.function.server.RouterFunction;
import org.springframework.web.reactive.function.server.ServerResponse;

@SpringBootApplication
public class HelloWebFluxApplication {

    public static void main(String[] args) {
        SpringApplication.run(HelloWebFluxApplication.class, args);
    }

    @Bean
    RouterFunction&lt;ServerResponse&gt; routes() {
        return route(GET(&quot;/&quot;), req -&gt; ok().syncBody(&quot;Hello World!&quot;));
    }
}
</code></pre>
<p>ã‚‚ã£ã¨ã„ã†ã¨<code>body(Publisher&lt;T&gt; publisher, T clazz)</code>ã¯æ¬¡ã®å‡¦ç†ã®ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã§ã™ã€‚</p>
<pre><code class="lang-java">package com.example;

import static org.springframework.web.reactive.function.server.RequestPredicates.GET;
import static org.springframework.web.reactive.function.server.RouterFunctions.route;
import static org.springframework.web.reactive.function.server.ServerResponse.ok;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.annotation.Bean;
import org.springframework.web.reactive.function.BodyInserters;
import org.springframework.web.reactive.function.server.RouterFunction;
import org.springframework.web.reactive.function.server.ServerResponse;

import reactor.core.publisher.Flux;

@SpringBootApplication
public class HelloWebFluxApplication {

    public static void main(String[] args) {
        SpringApplication.run(HelloWebFluxApplication.class, args);
    }

    @Bean
    RouterFunction&lt;ServerResponse&gt; routes() {
        return route(GET(&quot;/&quot;), req -&gt; ok().body(
                BodyInserters.fromPublisher(Flux.just(&quot;Hello&quot;, &quot;World!&quot;), String.class)));
    }
}
</code></pre>
<p>ã“ã‚Œã‚‚static importã™ã‚‹ã¨æ¬¡ã®ã‚ˆã†ã«æ›¸ã‘ã¾ã™ã€‚</p>
<pre><code class="lang-java">package com.example;

import static org.springframework.web.reactive.function.BodyInserters.fromPublisher;
import static org.springframework.web.reactive.function.server.RequestPredicates.GET;
import static org.springframework.web.reactive.function.server.RouterFunctions.route;
import static org.springframework.web.reactive.function.server.ServerResponse.ok;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.annotation.Bean;
import org.springframework.web.reactive.function.server.RouterFunction;
import org.springframework.web.reactive.function.server.ServerResponse;

import reactor.core.publisher.Flux;

@SpringBootApplication
public class HelloWebFluxApplication {

    public static void main(String[] args) {
        SpringApplication.run(HelloWebFluxApplication.class, args);
    }

    @Bean
    RouterFunction&lt;ServerResponse&gt; routes() {
        return route(GET(&quot;/&quot;), req -&gt; ok()
                .body(fromPublisher(Flux.just(&quot;Hello&quot;, &quot;World!&quot;), String.class)));
    }
}
</code></pre>
<p>ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒœãƒ‡ã‚£ã®æŒ‡å®šã‚’ã“ã ã‚ã‚‹å ´åˆã¯<code>BodyInserters</code>ã«ã„ã‚ã„ã‚ãƒ¡ã‚½ãƒƒãƒ‰ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>
</blockquote>
<p>ã•ã¦ã€Beanå®šç¾©ä¸­ã«ãƒ©ãƒ ãƒ€ã§Routingå®šç¾©ã‚’æ›¸ããã£ã¦ã‚‚è‰¯ã„ã§ã™ãŒã€é‡ãŒå¤šããªã‚‹ã¨è¦‹é€šã—ãŒæ‚ªããªã‚‹ã®ã§ã€é€šå¸¸ã¯Handlerã‚¯ãƒ©ã‚¹ã‚’ç”¨æ„ã—ã¦ã€ãƒ¡ã‚½ãƒƒãƒ‰å‚ç…§ã—ã¾ã™ã€‚</p>
<p><code>src/main/java/com/example/HelloHandler.java</code>ã‚’ä½œæˆã—ã¦ã€Hello Worldã®å‡¦ç†ã‚’ç§»ã—ã¾ã—ã‚‡ã†ã€‚</p>
<pre><code class="lang-java">package com.example;

import static org.springframework.web.reactive.function.server.ServerResponse.ok;

import org.springframework.stereotype.Component;
import org.springframework.web.reactive.function.server.ServerRequest;
import org.springframework.web.reactive.function.server.ServerResponse;

import reactor.core.publisher.Flux;
import reactor.core.publisher.Mono;

@Component
public class HelloHandler {

    public Mono&lt;ServerResponse&gt; hello(ServerRequest req) {
        return ok().body(Flux.just(&quot;Hello&quot;, &quot;World!&quot;), String.class);
    }
}
</code></pre>
<p>Beanå®šç¾©ã‚’æ¬¡ã®ã‚ˆã†ã«å¤‰ãˆã¾ã™ã€‚</p>
<pre><code class="lang-java">package com.example;

import static org.springframework.web.reactive.function.server.RequestPredicates.GET;
import static org.springframework.web.reactive.function.server.RouterFunctions.route;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.annotation.Bean;
import org.springframework.web.reactive.function.server.RouterFunction;
import org.springframework.web.reactive.function.server.ServerResponse;

@SpringBootApplication
public class HelloWebFluxApplication {

    public static void main(String[] args) {
        SpringApplication.run(HelloWebFluxApplication.class, args);
    }

    @Bean
    RouterFunction&lt;ServerResponse&gt; routes(HelloHandler helloHandler) {
        return route(GET(&quot;/&quot;), helloHandler::hello);
    }
}
</code></pre>
<p>ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®å‡¦ç†ã ã‘ã§ãªãã€Routingå®šç¾©ã‚‚Handlerã«ã‚‚ãŸã›ãŸã„å ´åˆã¯æ¬¡ã®ã‚ˆã†ãª<code>routes</code>ãƒ¡ã‚½ãƒƒãƒ‰ã‚’Handlerå´ã«ä½œã‚‹ã®ãŒ<a href="https://github.com/snicoll-scratches/functional-web-playground/pull/4">ã‚ªã‚¹ã‚¹ãƒ¡</a>ã§ã™ã€‚</p>
<pre><code class="lang-java">package com.example;

import static org.springframework.web.reactive.function.server.RequestPredicates.GET;
import static org.springframework.web.reactive.function.server.RouterFunctions.route;
import static org.springframework.web.reactive.function.server.ServerResponse.ok;

import org.springframework.stereotype.Component;
import org.springframework.web.reactive.function.server.RouterFunction;
import org.springframework.web.reactive.function.server.ServerRequest;
import org.springframework.web.reactive.function.server.ServerResponse;

import reactor.core.publisher.Flux;
import reactor.core.publisher.Mono;

@Component
public class HelloHandler {

    public RouterFunction&lt;ServerResponse&gt; routes() {
        return route(GET(&quot;/&quot;), this::hello);
    }

    Mono&lt;ServerResponse&gt; hello(ServerRequest req) {
        return ok().body(Flux.just(&quot;Hello&quot;, &quot;World!&quot;), String.class);
    }
}
</code></pre>
<p>Beanå®šç¾©ãŒHandlerã®<code>routes</code>ã‚’å‘¼ã³å‡ºã™ã ã‘ã§ã™ã€‚</p>
<pre><code class="lang-java">package com.example;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.annotation.Bean;
import org.springframework.web.reactive.function.server.RouterFunction;
import org.springframework.web.reactive.function.server.ServerResponse;

@SpringBootApplication
public class HelloWebFluxApplication {

    public static void main(String[] args) {
        SpringApplication.run(HelloWebFluxApplication.class, args);
    }

    @Bean
    RouterFunction&lt;ServerResponse&gt; routes(HelloHandler helloHandler) {
        return helloHandler.routes();
    }
}
</code></pre>
<p>ã“ã®ã‚ˆã†ã«ã—ãŸå ´åˆã€è¤‡æ•°ã®Handlerã®<code>routes</code>ã‚’åˆæˆã™ã‚‹ã“ã¨ã‚‚ã§ãã€è¦‹é€šã—ãŒã‚ˆã‚Šã‚ˆããªã‚Šã¾ã™ã€‚</p>
<pre><code class="lang-java">    @Bean
    RouterFunction&lt;ServerResponse&gt; routes(HelloHandler helloHandler, FooHandler fooHandler) {
        return helloHandler.routes().and(fooHandler.routes());
    }
</code></pre>
<h4 id="-stream">ç„¡é™Stream</h4>
<p>@Controllerã®å ´åˆã¨ã»ã¼åŒã˜ã§ã™ãŒã€<code>Accept</code>ãƒ˜ãƒƒãƒ€ã«ã‚ˆã‚‹Content-NegotiationãŒ(å¤šåˆ†)ãªãã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä½œæˆæ™‚ã«<code>contentType</code>ãƒ¡ã‚½ãƒƒãƒ‰ã§Content-Typeã‚’æ˜ç¤ºã—ã¾ã™ã€‚</p>
<p>Routingå®šç¾©ã¯<code>routes</code>ãƒ¡ã‚½ãƒƒãƒ‰å†…ã«<code>addRoute</code>ãƒ¡ã‚½ãƒƒãƒ‰ã§chainã§ãã¾ã™ã€‚</p>
<pre><code class="lang-java">package com.example;

import static org.springframework.web.reactive.function.server.RequestPredicates.GET;
import static org.springframework.web.reactive.function.server.RouterFunctions.route;
import static org.springframework.web.reactive.function.server.ServerResponse.ok;

import java.util.stream.Stream;

import org.springframework.http.MediaType;
import org.springframework.stereotype.Component;
import org.springframework.web.reactive.function.server.RouterFunction;
import org.springframework.web.reactive.function.server.ServerRequest;
import org.springframework.web.reactive.function.server.ServerResponse;

import reactor.core.publisher.Flux;
import reactor.core.publisher.Mono;

@Component
public class HelloHandler {

    public RouterFunction&lt;ServerResponse&gt; routes() {
        return route(GET(&quot;/&quot;), this::hello)
                .andRoute(GET(&quot;/stream&quot;), this::stream);
    }

    Mono&lt;ServerResponse&gt; hello(ServerRequest req) {
        return ok().body(Flux.just(&quot;Hello&quot;, &quot;World!&quot;), String.class);
    }

    Mono&lt;ServerResponse&gt; stream(ServerRequest req) {
        Stream&lt;Integer&gt; stream = Stream.iterate(0, i -&gt; i + 1);
        Flux&lt;Integer&gt; flux = Flux.fromStream(stream);
        return ok().contentType(MediaType.APPLICATION_STREAM_JSON).body(flux,
                Integer.class);
    }
}
</code></pre>
<p>Content-Typeã‚’æ˜ç¤ºã—ã¦ã„ã‚‹ã®ã§ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹éš›ã¯<code>Accept</code>ãƒ˜ãƒƒãƒ€ä¸è¦ã§ã™ã€‚</p>
<pre><code>$ curl -v localhost:8080/stream 
&gt; GET /stream HTTP/1.1
&gt; Host: localhost:8080
&gt; User-Agent: curl/7.43.0
&gt; Accept: */*
&gt; 
&lt; HTTP/1.1 200 OK
&lt; transfer-encoding: chunked
&lt; Content-Type: application/stream+json
&lt; 
0
1
2
3
4
5
6
...
</code></pre><p><code>Map&lt;String, Integer&gt;</code>ãªã©Genericsãªå‹ã§è¿”ã™å ´åˆã¯ã€<code>BodyInserters.fromPublisher(P publisher, ResolvableType elementType)</code>ã‚’ä½¿ã„ã¾ã™ã€‚</p>
<p>ã¡ã‚‡ã£ã¨é¢å€’ã«è¦‹ãˆã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p>
<pre><code class="lang-java">package com.example;

import static org.springframework.web.reactive.function.BodyInserters.fromPublisher;
import static org.springframework.web.reactive.function.server.RequestPredicates.GET;
import static org.springframework.web.reactive.function.server.RouterFunctions.route;
import static org.springframework.web.reactive.function.server.ServerResponse.ok;

import java.util.Collections;
import java.util.Map;
import java.util.stream.Stream;

import org.springframework.core.ResolvableType;
import org.springframework.http.MediaType;
import org.springframework.stereotype.Component;
import org.springframework.web.reactive.function.server.RouterFunction;
import org.springframework.web.reactive.function.server.ServerRequest;
import org.springframework.web.reactive.function.server.ServerResponse;

import reactor.core.publisher.Flux;
import reactor.core.publisher.Mono;

@Component
public class HelloHandler {

    public RouterFunction&lt;ServerResponse&gt; routes() {
        return route(GET(&quot;/&quot;), this::hello).andRoute(GET(&quot;/stream&quot;), this::stream);
    }

    public Mono&lt;ServerResponse&gt; hello(ServerRequest req) {
        return ok().body(Flux.just(&quot;Hello&quot;, &quot;World!&quot;), String.class);
    }

    public Mono&lt;ServerResponse&gt; stream(ServerRequest req) {
        Stream&lt;Integer&gt; stream = Stream.iterate(0, i -&gt; i + 1);
        Flux&lt;Map&lt;String, Integer&gt;&gt; flux = Flux.fromStream(stream)
                .map(i -&gt; Collections.singletonMap(&quot;value&quot;, i));
        return ok().contentType(MediaType.APPLICATION_STREAM_JSON)
                .body(fromPublisher(flux, ResolvableType.forClassWithGenerics(Map.class,
                        String.class, Integer.class)));
    }
}
</code></pre>
<p><code>HelloWebFluxApplication</code>ã‚¯ãƒ©ã‚¹ã‚’å†èµ·å‹•ã—ã¦ã€<code>/stream</code>ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ç„¡é™JSON StreamãŒè¿”ã‚Šã¾ã™ã€‚</p>
<pre><code>$ curl -v localhost:8080/stream 
&gt; GET /stream HTTP/1.1
&gt; Host: localhost:8080
&gt; User-Agent: curl/7.43.0
&gt; Accept: */*
&gt; 
&lt; HTTP/1.1 200 OK
&lt; transfer-encoding: chunked
&lt; Content-Type: application/stream+json
&lt; 
{&quot;value&quot;:0}
{&quot;value&quot;:1}
{&quot;value&quot;:2}
{&quot;value&quot;:3}
{&quot;value&quot;:4}
{&quot;value&quot;:5}
{&quot;value&quot;:6}
{&quot;value&quot;:7}
{&quot;value&quot;:8}
{&quot;value&quot;:9}
{&quot;value&quot;:10}
{&quot;value&quot;:11}
{&quot;value&quot;:12}
{&quot;value&quot;:13}
{&quot;value&quot;:14}
...
</code></pre><h4 id="post-">POSTã®ä¾‹</h4>
<p>POSTã®å ´åˆã¯ã€<code>RequestPredicates.POST</code>ã‚’ä½¿ã£ã¦ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’å®šç¾©ã™ã‚‹ã®ã¨ã€
ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ã‚’<code>ServerRequest.bodyToMono</code>ã‚ã‚‹ã„ã¯<code>ServerRequest.bodyToFlux</code>ã‚’ä½¿ãˆã°ã€ã“ã‚Œã¾ã§èª¬æ˜ã—ãŸã“ã¨ã¨ç‰¹ã«å¤‰ã‚ã‚Šã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
<pre><code class="lang-java">package com.example;

import static org.springframework.web.reactive.function.BodyInserters.fromPublisher;
import static org.springframework.web.reactive.function.server.RequestPredicates.GET;
import static org.springframework.web.reactive.function.server.RequestPredicates.POST;
import static org.springframework.web.reactive.function.server.RouterFunctions.route;
import static org.springframework.web.reactive.function.server.ServerResponse.ok;

import java.util.Collections;
import java.util.Map;
import java.util.stream.Stream;

import org.springframework.core.ResolvableType;
import org.springframework.http.MediaType;
import org.springframework.stereotype.Component;
import org.springframework.web.reactive.function.server.RouterFunction;
import org.springframework.web.reactive.function.server.ServerRequest;
import org.springframework.web.reactive.function.server.ServerResponse;

import reactor.core.publisher.Flux;
import reactor.core.publisher.Mono;

@Component
public class HelloHandler {

    public RouterFunction&lt;ServerResponse&gt; routes() {
        return route(GET(&quot;/&quot;), this::hello)
                .andRoute(GET(&quot;/stream&quot;), this::stream)
                .andRoute(POST(&quot;/echo&quot;), this::echo);
    }

    public Mono&lt;ServerResponse&gt; hello(ServerRequest req) {
        return ok().body(Flux.just(&quot;Hello&quot;, &quot;World!&quot;), String.class);
    }

    public Mono&lt;ServerResponse&gt; stream(ServerRequest req) {
        Stream&lt;Integer&gt; stream = Stream.iterate(0, i -&gt; i + 1);
        Flux&lt;Map&lt;String, Integer&gt;&gt; flux = Flux.fromStream(stream)
                .map(i -&gt; Collections.singletonMap(&quot;value&quot;, i));
        return ok().contentType(MediaType.APPLICATION_STREAM_JSON)
                .body(fromPublisher(flux, ResolvableType.forClassWithGenerics(Map.class,
                        String.class, Integer.class)));
    }

    public Mono&lt;ServerResponse&gt; echo(ServerRequest req) {
        Mono&lt;String&gt; body = req.bodyToMono(String.class).map(String::toUpperCase);
        return ok().body(body, String.class);
    }
}
</code></pre>
<p>POST /streamã‚‚åŒã˜ã§ã™ãŒã€Request Bodyã‚’Genericså‹ã®<code>Publisher</code>ã§å—ã‘ã‚‹å ´åˆã¯<code>ServerRequest.bodyToFlux</code>ã§ã¯ãªãã€<code>ServerRequest.body</code>ãƒ¡ã‚½ãƒƒãƒ‰ã«<code>BodyInserters</code>ã®åå¯¾ã®<code>BodyExtractors</code>ã‚’æ¸¡ã—ã¾ã™ã€‚</p>
<pre><code class="lang-java">package com.example;

import static org.springframework.web.reactive.function.BodyExtractors.toFlux;
import static org.springframework.web.reactive.function.BodyInserters.fromPublisher;
import static org.springframework.web.reactive.function.server.RequestPredicates.GET;
import static org.springframework.web.reactive.function.server.RequestPredicates.POST;
import static org.springframework.web.reactive.function.server.RouterFunctions.route;
import static org.springframework.web.reactive.function.server.ServerResponse.ok;

import java.util.Collections;
import java.util.Map;
import java.util.stream.Stream;

import org.springframework.core.ResolvableType;
import org.springframework.http.MediaType;
import org.springframework.stereotype.Component;
import org.springframework.web.reactive.function.server.RouterFunction;
import org.springframework.web.reactive.function.server.ServerRequest;
import org.springframework.web.reactive.function.server.ServerResponse;

import reactor.core.publisher.Flux;
import reactor.core.publisher.Mono;

@Component
public class HelloHandler {

    public RouterFunction&lt;ServerResponse&gt; routes() {
        return route(GET(&quot;/&quot;), this::hello)
                .andRoute(GET(&quot;/stream&quot;), this::stream)
                .andRoute(POST(&quot;/echo&quot;), this::echo)
                .andRoute(POST(&quot;/stream&quot;), this::postStream);
    }

    public Mono&lt;ServerResponse&gt; hello(ServerRequest req) {
        return ok().body(Flux.just(&quot;Hello&quot;, &quot;World!&quot;), String.class);
    }

    public Mono&lt;ServerResponse&gt; stream(ServerRequest req) {
        Stream&lt;Integer&gt; stream = Stream.iterate(0, i -&gt; i + 1);
        Flux&lt;Map&lt;String, Integer&gt;&gt; flux = Flux.fromStream(stream)
                .map(i -&gt; Collections.singletonMap(&quot;value&quot;, i));
        return ok().contentType(MediaType.APPLICATION_STREAM_JSON)
                .body(fromPublisher(flux, ResolvableType.forClassWithGenerics(Map.class,
                        String.class, Integer.class)));
    }

    public Mono&lt;ServerResponse&gt; echo(ServerRequest req) {
        Mono&lt;String&gt; body = req.bodyToMono(String.class).map(String::toUpperCase);
        return ok().body(body, String.class);
    }

    public Mono&lt;ServerResponse&gt; postStream(ServerRequest req) {
        Flux&lt;Map&lt;String, Integer&gt;&gt; body = req.body(toFlux(ResolvableType
                .forClassWithGenerics(Map.class, String.class, Integer.class))); // BodyExtractors.toFluxã‚’static import
        return ok().contentType(MediaType.TEXT_EVENT_STREAM)
                .body(fromPublisher(body
                        .map(m -&gt; Collections.singletonMap(&quot;double&quot;, m.get(&quot;value&quot;) * 2)),
                        ResolvableType.forClassWithGenerics(Map.class, String.class,
                                Integer.class)));
    }
}
</code></pre>
<p>ã“ã‚Œã§<code>HelloController</code>ç›¸å½“ã®<code>HelloHandler</code>ã‚¯ãƒ©ã‚¹ãŒå‡ºæ¥ä¸ŠãŒã‚Šã¾ã—ãŸã€‚</p>
<blockquote>
<p><code>RequestPredicates.GET</code>ã¯<code>RequestPredicates.POST</code>ã¯<code>@GetMapping</code>ã€<code>@PostMapping</code>ã«ç›¸å½“ã—ã¾ã™ãŒã€HTTPãƒ¡ã‚½ãƒƒãƒ‰ã«å¯„ã‚‰ãªã„<code>@RequestMapping</code>ã«å¯¾å¿œã™ã‚‹ã®ã¯<code>RequestPredicates.path</code>ã§ã™ã€‚</p>
<p>ã¾ãŸã“ã‚Œã‚‰ã¯Functional Interfaceãªã®ã§ã€æ¬¡ã®ã‚ˆã†ã«ãƒ©ãƒ ãƒ€å¼ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒãƒƒãƒãƒ³ã‚°ãƒ«ãƒ¼ãƒ«ã‚’ä»»æ„ã§æ›¸ãã“ã¨ãŒã§ãã¾ã™ã€‚</p>
<pre><code class="lang-java">.andRoute(req -&gt; req.headers().header(&quot;X-Foo&quot;).contains(&quot;bar&quot;), this::bar) // X-Fooãƒ˜ãƒƒãƒ€ãŒbarã®å ´åˆã«ãƒãƒƒãƒ
.andRoute(req -&gt; true, this::foo); // ãªã‚“ã§ã‚‚ãƒãƒƒãƒ
</code></pre>
<p>ã“ã®ã‚ãŸã‚ŠãŒRouter Functionsã®å¼·åŠ›ãªç‚¹ã§ã™ã€‚</p>
</blockquote>
<hr>
<p>æœ¬è¨˜äº‹ã§ã¯Spring WebFluxã®ç°¡å˜ãªä½¿ã„æ–¹ã‚’ç´¹ä»‹ã—ã¾ã—ãŸã€‚</p>
<h3 id="-">æ¬¡å›äºˆå‘Š</h3>
<ul>
<li>ã€Œ<a href="https://blog.ik.am/entries/418">ã¯ã˜ã‚ã¦ã®Spring WebFlux ãã®1.5</a>ã€ã§ã¯Spring Bootã‚’ä½¿ã‚ãªã„Router Functionã®Bootstrapã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã™ã€‚</li>
<li>ã€Œã¯ã˜ã‚ã¦ã®Spring WebFlux ãã®2ã€ã§ã¯HTTPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§ã‚ã‚‹<code>WebClient</code>ã¨Reactiveãƒ†ã‚¹ãƒˆã‚µãƒãƒ¼ãƒˆã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã™ã€‚</li>
<li>ã€Œã¯ã˜ã‚ã¦ã®Spring WebFlux ãã®3ã€ã§ã¯PubSubãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°ã‚’ä½¿ã£ãŸReactive Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œã‚‹äºˆå®šã§ã™ã€‚</li>
</ul>
<p>ç¹°ã‚Šè¿”ã—ã«ãªã‚Šã¾ã™ãŒã€2017/5/17ã®Java Day Tokyo 2017ã®D1-D5ã§Spring WebFluxã«å…¨ä½“åƒã«ã¤ã„ã¦è©³ã—ããŠè©±ã—ã¾ã™ã€‚
<a href="http://www.oracle.co.jp/events/javaday/2017">http://www.oracle.co.jp/events/javaday/2017</a></p>
<p><strong>è¿½è¨˜</strong> Java Day Tokyoã®è³‡æ–™ã‚’å…¬é–‹ã—ã¾ã—ãŸ</p>
<p><iframe src="//www.slideshare.net/slideshow/embed_code/key/mFtFrfSzmdMnU9" width="595" height="485" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;" allowfullscreen> </iframe> <div style="margin-bottom:5px"> <strong> <a href="//www.slideshare.net/makingx/spring-framework-50-reactive-web-application-javadaytokyo" title="Spring Framework 5.0ã«ã‚ˆã‚‹ Reactive Web Application #JavaDayTokyo" target="_blank">Spring Framework 5.0ã«ã‚ˆã‚‹ Reactive Web Application #JavaDayTokyo</a> </strong> from <strong><a target="_blank" href="https://www.slideshare.net/makingx">Toshiaki Maki</a></strong> </div></p>
</div>
</article>
<footer>
    <a href="https://blog.ik.am">BLOG.IK.AM</a> â€” &copy; 2010-2017 <a href="https://twitter.com/making">Toshiaki
    Maki</a>
</footer>
</body>
</html>